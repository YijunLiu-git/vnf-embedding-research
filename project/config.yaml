# config.yaml - ä¼˜åŒ–ç‰ˆï¼šç²¾ç®€è¾“å‡ºï¼Œè°ƒæ•´æé™å‹åŠ›é…ç½®

metadata:
  version: "1.0.0-optimized"
  description: "ä¼˜åŒ–çš„VNFåµŒå…¥ç¯å¢ƒé…ç½® - ç²¾ç®€è¾“å‡ºç‰ˆ"
  last_updated: "2025-01-04"
  validated: true

# è¾“å‡ºæ§åˆ¶
output:
  verbose: false              # å…³é—­è¯¦ç»†è¾“å‡º
  show_scenario_analysis: false  # å…³é—­è¯¦ç»†åœºæ™¯åˆ†æ
  show_pressure_details: false   # å…³é—­å‹åŠ›åˆ†æè¯¦æƒ…
  show_vnf_details: false       # å…³é—­VNFè¯¦æƒ…
  progress_interval: 25          # æ¯25è½®æ˜¾ç¤ºä¸€æ¬¡è¿›åº¦

# âœ… å…³é”®ä¿®å¤1: ç»Ÿä¸€ç‰¹å¾ç»´åº¦
dimensions:
  node_feature_dim: 8           # 4åŸºç¡€ç‰¹å¾ + 4çŠ¶æ€ç‰¹å¾
  edge_feature_dim_full: 4      # [bandwidth, latency, jitter, packet_loss] 
  edge_feature_dim_baseline: 2  # [bandwidth, latency]
  vnf_context_dim: 6           # [cpu, memory, bandwidth/100, vnf_type/3, progress, remaining]
  gnn_output_dim: 256          # å›ºå®šè¾“å‡ºç»´åº¦

# âœ… å…³é”®ä¿®å¤2: ç»Ÿä¸€è®­ç»ƒé…ç½®
train:
  episodes: 10
  episodes_per_scenario: 25     # æ¯ä¸ªåœºæ™¯25è½®
  max_episode_steps: 20
  save_interval: 50             # å‡å°‘ä¿å­˜é¢‘ç‡
  log_interval: 25              # å‡å°‘æ—¥å¿—é¢‘ç‡
  lr: 0.0003
  gamma: 0.99
  batch_size: 32
  epsilon_start: 1.0
  epsilon_decay: 0.998
  epsilon_min: 0.05
  buffer_size: 10000
  target_update: 100
  eps_clip: 0.2
  entropy_coef: 0.02
  value_coef: 0.5
  ppo_epochs: 4
  mini_batch_size: 64
  rollout_length: 128
  gae_lambda: 0.95
  max_grad_norm: 0.5

# âœ… å…³é”®ä¿®å¤3: åŸºç¡€æ‹“æ‰‘é…ç½®ï¼ˆé€‚ä¸­èµ„æºæ°´å¹³ï¼‰
topology:
  use_realistic: true
  node_counts:
    core: 6
    aggregation: 12
    edge: 24
    total: 42
  base_node_resources:          # åŸºç¡€èµ„æºæ°´å¹³
    cpu: 0.8                    # é€‚ä¸­çš„CPU
    memory: 0.8                 # é€‚ä¸­çš„å†…å­˜
  edge_resources:
    bandwidth_min: 8.0
    bandwidth_max: 60.0
    latency_min: 1.0
    latency_max: 12.0
    jitter_min: 0.002
    jitter_max: 0.02
    packet_loss_min: 0.0005
    packet_loss_max: 0.015
  node_types:
    core: 0.25
    aggregation: 0.35
    edge: 0.4

# âœ… å…³é”®ä¿®å¤4: åŸºç¡€VNFéœ€æ±‚é…ç½®
vnf_requirements:
  cpu_min: 0.03               # å¹³è¡¡çš„éœ€æ±‚èŒƒå›´
  cpu_max: 0.15
  memory_min: 0.02
  memory_max: 0.12
  bandwidth_min: 2.0
  bandwidth_max: 8.0
  chain_length_range: [3, 6]
  priority_levels: [1, 2, 3, 4, 5]
  priority_distribution: [0.1, 0.2, 0.4, 0.2, 0.1]

# âœ… å…³é”®ä¿®å¤5: åŸºç¡€å¥–åŠ±é…ç½®ï¼ˆæƒé‡æ€»å’Œ=1.0ï¼‰
reward:
  sar_weight: 0.5             # æƒé‡æ€»å’Œ = 1.0
  latency_weight: 0.3
  efficiency_weight: 0.15
  quality_weight: 0.05
  
  base_reward: 10.0
  penalty: 20.0
  completion_bonus: 15.0
  network_weight: 8.0
  
  # SARé˜ˆå€¼
  excellent_sar: 0.95
  good_sar: 0.9
  acceptable_sar: 0.8
  minimum_sar: 0.7
  
  # å»¶è¿Ÿé˜ˆå€¼
  excellent_latency: 30.0
  good_latency: 50.0
  acceptable_latency: 80.0
  sla_latency: 100.0
  
  # è´¨é‡é˜ˆå€¼
  jitter_limit: 0.01
  loss_limit: 0.01
  
  # å…¶ä»–å‚æ•°
  alpha: 0.15
  beta: 0.3
  gamma: 0.2
  delta: 0.2
  hop_weight: 0.2
  latency_threshold: 80.0
  jitter_threshold: 0.01
  loss_threshold: 0.01
  quality_penalty_weight: 2.0
  
  # çº¦æŸæƒ©ç½šæ˜ å°„
  penalty_map:
    node_occupied: -5.0
    insufficient_cpu: -8.0
    insufficient_memory: -6.0
    insufficient_bandwidth: -4.0
  
  # SARå·®å¼‚åŒ–å¥–åŠ±
  sar_differentiation:
    partial_completion_bonus: 15.0
    smart_rejection_bonus: 8.0
    resource_conservation_bonus: 3.0
    priority_weighting: true
    adaptive_deployment: 2.0

# âœ… å…³é”®ä¿®å¤6: ç»Ÿä¸€GNNé…ç½®
gnn:
  edge_aware:
    node_dim: 8               # ç»Ÿä¸€8ç»´èŠ‚ç‚¹ç‰¹å¾
    edge_dim: 4               # 4ç»´è¾¹ç‰¹å¾
    hidden_dim: 128
    output_dim: 256
    layers: 6
    dropout: 0.1
    heads: 4
  baseline:
    node_dim: 8               # ç»Ÿä¸€8ç»´èŠ‚ç‚¹ç‰¹å¾  
    edge_dim: 2               # 2ç»´è¾¹ç‰¹å¾
    hidden_dim: 64
    output_dim: 256
    layers: 4
    dropout: 0.1
    heads: 4

# âœ… å…³é”®ä¿®å¤7: æ¸è¿›å¼åœºæ™¯é…ç½®ï¼ˆè°ƒæ•´æé™å‹åŠ›ï¼‰
scenarios:
  
  # åœºæ™¯1: æ­£å¸¸è¿è¥æœŸ (Episodes 1-25)
  normal_operation:
    name: "æ­£å¸¸è¿è¥æœŸ"
    episodes: [1, 25]
    expected_sar_range: [0.80, 0.95]
    realism_level: 5
    description: "æ•°æ®ä¸­å¿ƒæ­£å¸¸è¿è¥æœŸï¼Œèµ„æºå……è¶³ï¼ŒéªŒè¯åŸºç¡€åŠŸèƒ½"
    
    topology:
      node_resources:
        cpu: 1.2              # åŸºç¡€èµ„æº Ã— 1.2 = å……è¶³
        memory: 1.2
      edge_resources:
        bandwidth_min: 15.0
        bandwidth_max: 80.0
        latency_min: 0.5
        latency_max: 8.0
        jitter_min: 0.001
        jitter_max: 0.008
        packet_loss_min: 0.0001
        packet_loss_max: 0.003
      node_types:
        core: 0.3
        aggregation: 0.4
        edge: 0.3
    
    vnf_requirements:
      cpu_min: 0.01           # é™ä½éœ€æ±‚ç¡®ä¿é«˜SAR
      cpu_max: 0.06
      memory_min: 0.005
      memory_max: 0.05
      bandwidth_min: 0.5
      bandwidth_max: 4.0
      chain_length_range: [3, 5]
    
    reward:                   # æƒé‡æ€»å’Œ = 1.0
      sar_weight: 0.40
      latency_weight: 0.35
      efficiency_weight: 0.20
      quality_weight: 0.05
      excellent_sar: 0.95
      good_sar: 0.90
      acceptable_sar: 0.85
      minimum_sar: 0.80
      base_reward: 12.0
      completion_bonus: 20.0
  
  # åœºæ™¯2: é«˜å³°æ‹¥å¡æœŸ (Episodes 26-50)  
  peak_congestion:
    name: "é«˜å³°æ‹¥å¡æœŸ"
    episodes: [26, 50]
    expected_sar_range: [0.65, 0.80]
    realism_level: 4
    description: "æµé‡é«˜å³°æœŸï¼Œèµ„æºå¼€å§‹ç´§å¼ ï¼ŒEdge-awareä¼˜åŠ¿æ˜¾ç°"
    
    topology:
      node_resources:
        cpu: 1.0              # åŸºç¡€èµ„æºæ°´å¹³
        memory: 1.0
      edge_resources:
        bandwidth_min: 10.0
        bandwidth_max: 50.0
        latency_min: 1.0
        latency_max: 12.0
        jitter_min: 0.003
        jitter_max: 0.015
        packet_loss_min: 0.001
        packet_loss_max: 0.008
      node_types:
        core: 0.25
        aggregation: 0.35
        edge: 0.4
    
    vnf_requirements:
      cpu_min: 0.02           # é€‚åº¦å¢åŠ éœ€æ±‚
      cpu_max: 0.08
      memory_min: 0.01
      memory_max: 0.06
      bandwidth_min: 1.0
      bandwidth_max: 5.0
      chain_length_range: [3, 6]
    
    reward:                   # æƒé‡æ€»å’Œ = 1.0
      sar_weight: 0.45
      latency_weight: 0.30
      efficiency_weight: 0.20
      quality_weight: 0.05
      excellent_sar: 0.80
      good_sar: 0.75
      acceptable_sar: 0.70
      minimum_sar: 0.65
      base_reward: 10.0
      completion_bonus: 18.0
  
  # åœºæ™¯3: æ•…éšœæ¢å¤æœŸ (Episodes 51-75)
  failure_recovery:
    name: "æ•…éšœæ¢å¤æœŸ"
    episodes: [51, 75]
    expected_sar_range: [0.50, 0.65]
    realism_level: 3
    description: "éƒ¨åˆ†èŠ‚ç‚¹æ•…éšœï¼Œèµ„æºç´§å¼ ï¼Œæµ‹è¯•é²æ£’æ€§"
    
    topology:
      node_resources:
        cpu: 0.8              # ğŸ”§ è°ƒæ•´ï¼šèµ„æºå‰Šå‡20%ï¼ˆè€Œé30%ï¼‰
        memory: 0.8
      edge_resources:
        bandwidth_min: 6.0
        bandwidth_max: 30.0
        latency_min: 2.0
        latency_max: 18.0
        jitter_min: 0.005
        jitter_max: 0.025
        packet_loss_min: 0.003
        packet_loss_max: 0.015
      node_types:
        core: 0.2
        aggregation: 0.3
        edge: 0.5
    
    vnf_requirements:
      cpu_min: 0.02          # ğŸ”§ è°ƒæ•´ï¼šé™ä½éœ€æ±‚ä¸‹é™
      cpu_max: 0.10          # ğŸ”§ è°ƒæ•´ï¼šé™ä½éœ€æ±‚ä¸Šé™
      memory_min: 0.015
      memory_max: 0.08
      bandwidth_min: 2.5
      bandwidth_max: 7.0
      chain_length_range: [3, 5]  # ğŸ”§ è°ƒæ•´ï¼šç¼©çŸ­é“¾é•¿åº¦
    
    reward:                   # æƒé‡æ€»å’Œ = 1.0
      sar_weight: 0.50
      latency_weight: 0.25
      efficiency_weight: 0.15
      quality_weight: 0.10
      excellent_sar: 0.65
      good_sar: 0.60
      acceptable_sar: 0.55
      minimum_sar: 0.50
      base_reward: 8.0
      completion_bonus: 25.0
      constraint_penalty_factor: 0.8
  
  # åœºæ™¯4: æé™å‹åŠ›æœŸ (Episodes 76-100) - ğŸ”§ é‡è¦è°ƒæ•´
  extreme_pressure:
    name: "æé™å‹åŠ›æœŸ"
    episodes: [76, 100]
    expected_sar_range: [0.35, 0.50]
    realism_level: 2
    description: "æé™å‹åŠ›æµ‹è¯•ï¼Œç®—æ³•è¾¹ç•Œç ”ç©¶"
    
    topology:
      node_resources:
        cpu: 0.7             # ğŸ”§ è°ƒæ•´ï¼šèµ„æºå‰Šå‡30%ï¼ˆè€Œé45%ï¼‰
        memory: 0.7
      edge_resources:
        bandwidth_min: 4.0
        bandwidth_max: 20.0
        latency_min: 3.0
        latency_max: 25.0
        jitter_min: 0.008
        jitter_max: 0.04
        packet_loss_min: 0.005
        packet_loss_max: 0.025
      node_types:
        core: 0.2            # ğŸ”§ è°ƒæ•´ï¼šå¢åŠ æ ¸å¿ƒèŠ‚ç‚¹æ¯”ä¾‹
        aggregation: 0.3
        edge: 0.5
    
    vnf_requirements:
      cpu_min: 0.02           # ğŸ”§ è°ƒæ•´ï¼šå¤§å¹…é™ä½éœ€æ±‚ä¸‹é™
      cpu_max: 0.08           # ğŸ”§ è°ƒæ•´ï¼šå¤§å¹…é™ä½éœ€æ±‚ä¸Šé™
      memory_min: 0.015
      memory_max: 0.06        # ğŸ”§ è°ƒæ•´ï¼šé™ä½å†…å­˜éœ€æ±‚
      bandwidth_min: 2.0
      bandwidth_max: 6.0
      chain_length_range: [3, 5]  # ğŸ”§ è°ƒæ•´ï¼šç¼©çŸ­é“¾é•¿åº¦
    
    reward:                   # æƒé‡æ€»å’Œ = 1.0
      sar_weight: 0.50
      latency_weight: 0.20
      efficiency_weight: 0.15
      quality_weight: 0.15
      excellent_sar: 0.50
      good_sar: 0.45
      acceptable_sar: 0.40
      minimum_sar: 0.35
      base_reward: 6.0
      completion_bonus: 35.0
      constraint_penalty_factor: 1.0 # ğŸ”§ å¤§å¹…å‡è½»æƒ©ç½š
      partial_deployment_bonus: 15.0

# âœ… å…³é”®ä¿®å¤8: ç½‘ç»œæ¶æ„é…ç½®
network:
  hidden_dim: 512
  dropout: 0.1
  activation: "relu"
  
# âœ… é…ç½®éªŒè¯ä¿¡æ¯
validation:
  dimension_consistency: true
  resource_feasibility: true
  sar_achievability: true
  weight_normalization: true
  scenario_progression: true
  
# âœ… é¢„æœŸæ€§èƒ½åŸºå‡†
expected_performance:
  normal_operation:
    sar_range: "80-95%"
    avg_latency: "< 40ms"
    success_rate: "> 90%"
  peak_congestion:
    sar_range: "65-80%"
    avg_latency: "< 60ms"
    success_rate: "> 80%"
  failure_recovery:
    sar_range: "50-65%"
    avg_latency: "< 100ms"
    success_rate: "> 70%"
  extreme_pressure:
    sar_range: "35-50%"
    avg_latency: "< 150ms"
    success_rate: "> 60%"